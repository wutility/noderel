#!/usr/bin/env node

const argv = require('minimist')(process.argv.slice(2));
const noderel = require('../src/noderel')

const argToArr = arg => {
  try {
    return arg ? arg.split(',') : arg
  } catch (error) {
    return null
  }
}

noderel({
  watch: argToArr(argv.watch || argv.w), // --watch app,bin
  ignore: argToArr(argv.ignore || argv.i),
  entry: argv.entry || argv.e,
  delay: argv.delay || argv.d,
  verbose: argv.verbose || argv.v,
  allowRestart: argv['allow-restart'] || argv.r
});